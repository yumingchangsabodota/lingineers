{% extends "header.html" %}

{% block content %}

<p>Vowel Chart</p>
<p id = 'formants'>{{formants}}</p>
<p id = 'x_y'>{{x_y}}</p>

<canvas id="myChart"></canvas>

<script type="text/javascript">
	$(document).ready(function(){
		var endpoint = /get-formants/
		var formants = '{{formants}}'

		$.ajax({
			method:'GET',
			url: endpoint,
				success: function(data){
					console.log(data)
					var config ={
										type: 'scatter',
									    data: {
									    	labels: data.labels,
									        datasets: [{
									            label: 'Vowel Chart',
									            data: data.data
									        }]
									    },
									    options: {
									    	events: false,
									    	animation: {duration:0, 
									    			onComplete: function () {
									                var self = this;
									                var elementsArray = [];
									                Chart.helpers.each(self.data.datasets, function (dataset, datasetIndex) {
									                    Chart.helpers.each(dataset.metaData, function (element, index) {
									                        var tooltip = new Chart.Tooltip({
									                            _chart: self.chart,
									                            _data: self.data,
									                            _options: self.options,
									                            _active: [element]
									                        }, self);

									                        tooltip.update();
									                        tooltip.transition(Chart.helpers.easingEffects.linear).draw();
									                    }, self);
									                }, self);
									            }},
									    	responsive: true,
									        scales: {
									            xAxes: [{
									                type: 'linear',
									                position: 'top',
									                ticks:{
									                	beginAtZero: true,
									                	reverse: true
									                }

									            }],
									            yAxes:[{
									                type: 'linear',
									                position: 'right',
									                ticks:{
									                	beginAtZero: true,
									                	reverse: true
									                }
									                
									            }]
									        },
/*
									     tooltips:{
									     	callbacks:{
									     		label: function(tooltipItem, data) {
									            var label = data.labels[tooltipItem.index];
												return label + ', F1 - ' + tooltipItem.yLabel + '    F2 - ' + tooltipItem.xLabel + ')';
									     	}
									     }

									    },
									    */

									}
						};
				var ctx = document.getElementById("myChart");
				var scatterChart = new Chart(ctx, config);
				},
				error: function(error){
					console.log("error")
					console.log(error)
				}
			})

	});



</script>

{% endblock %}



